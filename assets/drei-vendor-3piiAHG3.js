import{r as mt,a as m}from"./react-vendor-BGrwFi4G.js";import{V as w,a as A,M as X,T as K,S as Le,Q as Ce,O as fe,P as he,R as dt,b as bt,c as gt,d as yt,D as V,e as Et,W as Pt,C as vt}from"./three-vendor-T2jfE4GU.js";import{u as x,a as de}from"./fiber-vendor-B6OBVTdC.js";var Ot,Ie=mt;Ot=Ie.createRoot,Ie.hydrateRoot;function F(){return F=Object.assign?Object.assign.bind():function(a){for(var n=1;n<arguments.length;n++){var o=arguments[n];for(var e in o)({}).hasOwnProperty.call(o,e)&&(a[e]=o[e])}return a},F.apply(null,arguments)}function G(a,n,o){return n in a?Object.defineProperty(a,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):a[n]=o,a}function Ne(a,n){var o=Object.keys(a);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(a);n&&(e=e.filter(function(p){return Object.getOwnPropertyDescriptor(a,p).enumerable})),o.push.apply(o,e)}return o}function ze(a){for(var n=1;n<arguments.length;n++){var o=arguments[n]!=null?arguments[n]:{};n%2?Ne(Object(o),!0).forEach(function(e){G(a,e,o[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(o)):Ne(Object(o)).forEach(function(e){Object.defineProperty(a,e,Object.getOwnPropertyDescriptor(o,e))})}return a}new w;new w;function Ke(a,n){if(!(a instanceof n))throw new TypeError("Cannot call a class as a function")}var M=function a(n,o,e){var p=this;Ke(this,a),G(this,"dot2",function(u,f){return p.x*u+p.y*f}),G(this,"dot3",function(u,f,s){return p.x*u+p.y*f+p.z*s}),this.x=n,this.y=o,this.z=e},wt=[new M(1,1,0),new M(-1,1,0),new M(1,-1,0),new M(-1,-1,0),new M(1,0,1),new M(-1,0,1),new M(1,0,-1),new M(-1,0,-1),new M(0,1,1),new M(0,-1,1),new M(0,1,-1),new M(0,-1,-1)],ke=[151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,134,139,48,27,166,77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,102,143,54,65,25,63,161,1,216,80,73,209,76,132,187,208,89,18,169,200,196,135,130,116,188,159,86,164,100,109,198,173,186,3,64,52,217,226,250,124,123,5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,153,101,155,167,43,172,9,129,22,39,253,19,98,108,110,79,113,224,232,178,185,112,104,218,246,97,228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180],Ue=new Array(512),Ye=new Array(512),Tt=function(n){n>0&&n<1&&(n*=65536),n=Math.floor(n),n<256&&(n|=n<<8);for(var o=0;o<256;o++){var e;o&1?e=ke[o]^n&255:e=ke[o]^n>>8&255,Ue[o]=Ue[o+256]=e,Ye[o]=Ye[o+256]=wt[e%12]}};Tt(0);function Mt(a){if(typeof a=="number")a=Math.abs(a);else if(typeof a=="string"){var n=a;a=0;for(var o=0;o<n.length;o++)a=(a+(o+1)*(n.charCodeAt(o)%96))%2147483647}return a===0&&(a=311),a}function Fe(a){var n=Mt(a);return function(){var o=n*48271%2147483647;return n=o,o/2147483647}}var At=function a(n){var o=this;Ke(this,a),G(this,"seed",0),G(this,"init",function(e){o.seed=e,o.value=Fe(e)}),G(this,"value",Fe(this.seed)),this.init(n)},St=new At(Math.random()),_t={radius:1,center:[0,0,0]};function Bt(a,n){for(var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:St,e=ze(ze({},_t),n),p=e.radius,u=e.center,f=0;f<a.length;f+=3){var s=Math.pow(o.value(),.3333333333333333),l=o.value()*2-1,y=o.value()*2-1,h=o.value()*2-1,E=Math.sqrt(l*l+y*y+h*h);l=s*l/E,y=s*y/E,h=s*h/E,a[f]=l*p+u[0],a[f+1]=y*p+u[1],a[f+2]=h*p+u[2]}return a}var xt=Object.defineProperty,jt=(a,n,o)=>n in a?xt(a,n,{enumerable:!0,configurable:!0,writable:!0,value:o}):a[n]=o,Dt=(a,n,o)=>(jt(a,n+"",o),o);class Rt{constructor(){Dt(this,"_listeners")}addEventListener(n,o){this._listeners===void 0&&(this._listeners={});const e=this._listeners;e[n]===void 0&&(e[n]=[]),e[n].indexOf(o)===-1&&e[n].push(o)}hasEventListener(n,o){if(this._listeners===void 0)return!1;const e=this._listeners;return e[n]!==void 0&&e[n].indexOf(o)!==-1}removeEventListener(n,o){if(this._listeners===void 0)return;const p=this._listeners[n];if(p!==void 0){const u=p.indexOf(o);u!==-1&&p.splice(u,1)}}dispatchEvent(n){if(this._listeners===void 0)return;const e=this._listeners[n.type];if(e!==void 0){n.target=this;const p=e.slice(0);for(let u=0,f=p.length;u<f;u++)p[u].call(this,n);n.target=null}}}var Lt=Object.defineProperty,Ct=(a,n,o)=>n in a?Lt(a,n,{enumerable:!0,configurable:!0,writable:!0,value:o}):a[n]=o,i=(a,n,o)=>(Ct(a,typeof n!="symbol"?n+"":n,o),o);const ae=new dt,He=new bt,It=Math.cos(70*(Math.PI/180)),We=(a,n)=>(a%n+n)%n;let Nt=class extends Rt{constructor(n,o){super(),i(this,"object"),i(this,"domElement"),i(this,"enabled",!0),i(this,"target",new A),i(this,"minDistance",0),i(this,"maxDistance",1/0),i(this,"minZoom",0),i(this,"maxZoom",1/0),i(this,"minPolarAngle",0),i(this,"maxPolarAngle",Math.PI),i(this,"minAzimuthAngle",-1/0),i(this,"maxAzimuthAngle",1/0),i(this,"enableDamping",!1),i(this,"dampingFactor",.05),i(this,"enableZoom",!0),i(this,"zoomSpeed",1),i(this,"enableRotate",!0),i(this,"rotateSpeed",1),i(this,"enablePan",!0),i(this,"panSpeed",1),i(this,"screenSpacePanning",!0),i(this,"keyPanSpeed",7),i(this,"zoomToCursor",!1),i(this,"autoRotate",!1),i(this,"autoRotateSpeed",2),i(this,"reverseOrbit",!1),i(this,"reverseHorizontalOrbit",!1),i(this,"reverseVerticalOrbit",!1),i(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),i(this,"mouseButtons",{LEFT:X.ROTATE,MIDDLE:X.DOLLY,RIGHT:X.PAN}),i(this,"touches",{ONE:K.ROTATE,TWO:K.DOLLY_PAN}),i(this,"target0"),i(this,"position0"),i(this,"zoom0"),i(this,"_domElementKeyEvents",null),i(this,"getPolarAngle"),i(this,"getAzimuthalAngle"),i(this,"setPolarAngle"),i(this,"setAzimuthalAngle"),i(this,"getDistance"),i(this,"getZoomScale"),i(this,"listenToKeyEvents"),i(this,"stopListenToKeyEvents"),i(this,"saveState"),i(this,"reset"),i(this,"update"),i(this,"connect"),i(this,"dispose"),i(this,"dollyIn"),i(this,"dollyOut"),i(this,"getScale"),i(this,"setScale"),this.object=n,this.domElement=o,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=()=>h.phi,this.getAzimuthalAngle=()=>h.theta,this.setPolarAngle=t=>{let r=We(t,2*Math.PI),c=h.phi;c<0&&(c+=2*Math.PI),r<0&&(r+=2*Math.PI);let d=Math.abs(r-c);2*Math.PI-d<d&&(r<c?r+=2*Math.PI:c+=2*Math.PI),E.phi=r-c,e.update()},this.setAzimuthalAngle=t=>{let r=We(t,2*Math.PI),c=h.theta;c<0&&(c+=2*Math.PI),r<0&&(r+=2*Math.PI);let d=Math.abs(r-c);2*Math.PI-d<d&&(r<c?r+=2*Math.PI:c+=2*Math.PI),E.theta=r-c,e.update()},this.getDistance=()=>e.object.position.distanceTo(e.target),this.listenToKeyEvents=t=>{t.addEventListener("keydown",ue),this._domElementKeyEvents=t},this.stopListenToKeyEvents=()=>{this._domElementKeyEvents.removeEventListener("keydown",ue),this._domElementKeyEvents=null},this.saveState=()=>{e.target0.copy(e.target),e.position0.copy(e.object.position),e.zoom0=e.object.zoom},this.reset=()=>{e.target.copy(e.target0),e.object.position.copy(e.position0),e.object.zoom=e.zoom0,e.object.updateProjectionMatrix(),e.dispatchEvent(p),e.update(),l=s.NONE},this.update=(()=>{const t=new A,r=new A(0,1,0),c=new Ce().setFromUnitVectors(n.up,r),d=c.clone().invert(),v=new A,z=new Ce,Y=2*Math.PI;return function(){const Re=e.object.position;c.setFromUnitVectors(n.up,r),d.copy(c).invert(),t.copy(Re).sub(e.target),t.applyQuaternion(c),h.setFromVector3(t),e.autoRotate&&l===s.NONE&&re($e()),e.enableDamping?(h.theta+=E.theta*e.dampingFactor,h.phi+=E.phi*e.dampingFactor):(h.theta+=E.theta,h.phi+=E.phi);let k=e.minAzimuthAngle,U=e.maxAzimuthAngle;isFinite(k)&&isFinite(U)&&(k<-Math.PI?k+=Y:k>Math.PI&&(k-=Y),U<-Math.PI?U+=Y:U>Math.PI&&(U-=Y),k<=U?h.theta=Math.max(k,Math.min(U,h.theta)):h.theta=h.theta>(k+U)/2?Math.max(k,h.theta):Math.min(U,h.theta)),h.phi=Math.max(e.minPolarAngle,Math.min(e.maxPolarAngle,h.phi)),h.makeSafe(),e.enableDamping===!0?e.target.addScaledVector(T,e.dampingFactor):e.target.add(T),e.zoomToCursor&&D||e.object.isOrthographicCamera?h.radius=ce(h.radius):h.radius=ce(h.radius*O),t.setFromSpherical(h),t.applyQuaternion(d),Re.copy(e.target).add(t),e.object.matrixAutoUpdate||e.object.updateMatrix(),e.object.lookAt(e.target),e.enableDamping===!0?(E.theta*=1-e.dampingFactor,E.phi*=1-e.dampingFactor,T.multiplyScalar(1-e.dampingFactor)):(E.set(0,0,0),T.set(0,0,0));let $=!1;if(e.zoomToCursor&&D){let Q=null;if(e.object instanceof he&&e.object.isPerspectiveCamera){const J=t.length();Q=ce(J*O);const oe=J-Q;e.object.position.addScaledVector(q,oe),e.object.updateMatrixWorld()}else if(e.object.isOrthographicCamera){const J=new A(_.x,_.y,0);J.unproject(e.object),e.object.zoom=Math.max(e.minZoom,Math.min(e.maxZoom,e.object.zoom/O)),e.object.updateProjectionMatrix(),$=!0;const oe=new A(_.x,_.y,0);oe.unproject(e.object),e.object.position.sub(oe).add(J),e.object.updateMatrixWorld(),Q=t.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),e.zoomToCursor=!1;Q!==null&&(e.screenSpacePanning?e.target.set(0,0,-1).transformDirection(e.object.matrix).multiplyScalar(Q).add(e.object.position):(ae.origin.copy(e.object.position),ae.direction.set(0,0,-1).transformDirection(e.object.matrix),Math.abs(e.object.up.dot(ae.direction))<It?n.lookAt(e.target):(He.setFromNormalAndCoplanarPoint(e.object.up,e.target),ae.intersectPlane(He,e.target))))}else e.object instanceof fe&&e.object.isOrthographicCamera&&($=O!==1,$&&(e.object.zoom=Math.max(e.minZoom,Math.min(e.maxZoom,e.object.zoom/O)),e.object.updateProjectionMatrix()));return O=1,D=!1,$||v.distanceToSquared(e.object.position)>y||8*(1-z.dot(e.object.quaternion))>y?(e.dispatchEvent(p),v.copy(e.object.position),z.copy(e.object.quaternion),$=!1,!0):!1}})(),this.connect=t=>{e.domElement=t,e.domElement.style.touchAction="none",e.domElement.addEventListener("contextmenu",je),e.domElement.addEventListener("pointerdown",_e),e.domElement.addEventListener("pointercancel",B),e.domElement.addEventListener("wheel",xe)},this.dispose=()=>{var t,r,c,d,v,z;e.domElement&&(e.domElement.style.touchAction="auto"),(t=e.domElement)==null||t.removeEventListener("contextmenu",je),(r=e.domElement)==null||r.removeEventListener("pointerdown",_e),(c=e.domElement)==null||c.removeEventListener("pointercancel",B),(d=e.domElement)==null||d.removeEventListener("wheel",xe),(v=e.domElement)==null||v.ownerDocument.removeEventListener("pointermove",le),(z=e.domElement)==null||z.ownerDocument.removeEventListener("pointerup",B),e._domElementKeyEvents!==null&&e._domElementKeyEvents.removeEventListener("keydown",ue)};const e=this,p={type:"change"},u={type:"start"},f={type:"end"},s={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let l=s.NONE;const y=1e-6,h=new Le,E=new Le;let O=1;const T=new A,S=new w,R=new w,L=new w,C=new w,I=new w,N=new w,j=new w,P=new w,g=new w,q=new A,_=new w;let D=!1;const b=[],te={};function $e(){return 2*Math.PI/60/60*e.autoRotateSpeed}function H(){return Math.pow(.95,e.zoomSpeed)}function re(t){e.reverseOrbit||e.reverseHorizontalOrbit?E.theta+=t:E.theta-=t}function be(t){e.reverseOrbit||e.reverseVerticalOrbit?E.phi+=t:E.phi-=t}const ge=(()=>{const t=new A;return function(c,d){t.setFromMatrixColumn(d,0),t.multiplyScalar(-c),T.add(t)}})(),ye=(()=>{const t=new A;return function(c,d){e.screenSpacePanning===!0?t.setFromMatrixColumn(d,1):(t.setFromMatrixColumn(d,0),t.crossVectors(e.object.up,t)),t.multiplyScalar(c),T.add(t)}})(),Z=(()=>{const t=new A;return function(c,d){const v=e.domElement;if(v&&e.object instanceof he&&e.object.isPerspectiveCamera){const z=e.object.position;t.copy(z).sub(e.target);let Y=t.length();Y*=Math.tan(e.object.fov/2*Math.PI/180),ge(2*c*Y/v.clientHeight,e.object.matrix),ye(2*d*Y/v.clientHeight,e.object.matrix)}else v&&e.object instanceof fe&&e.object.isOrthographicCamera?(ge(c*(e.object.right-e.object.left)/e.object.zoom/v.clientWidth,e.object.matrix),ye(d*(e.object.top-e.object.bottom)/e.object.zoom/v.clientHeight,e.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),e.enablePan=!1)}})();function ie(t){e.object instanceof he&&e.object.isPerspectiveCamera||e.object instanceof fe&&e.object.isOrthographicCamera?O=t:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),e.enableZoom=!1)}function ne(t){ie(O/t)}function se(t){ie(O*t)}function Ee(t){if(!e.zoomToCursor||!e.domElement)return;D=!0;const r=e.domElement.getBoundingClientRect(),c=t.clientX-r.left,d=t.clientY-r.top,v=r.width,z=r.height;_.x=c/v*2-1,_.y=-(d/z)*2+1,q.set(_.x,_.y,1).unproject(e.object).sub(e.object.position).normalize()}function ce(t){return Math.max(e.minDistance,Math.min(e.maxDistance,t))}function Pe(t){S.set(t.clientX,t.clientY)}function Qe(t){Ee(t),j.set(t.clientX,t.clientY)}function ve(t){C.set(t.clientX,t.clientY)}function Je(t){R.set(t.clientX,t.clientY),L.subVectors(R,S).multiplyScalar(e.rotateSpeed);const r=e.domElement;r&&(re(2*Math.PI*L.x/r.clientHeight),be(2*Math.PI*L.y/r.clientHeight)),S.copy(R),e.update()}function et(t){P.set(t.clientX,t.clientY),g.subVectors(P,j),g.y>0?ne(H()):g.y<0&&se(H()),j.copy(P),e.update()}function tt(t){I.set(t.clientX,t.clientY),N.subVectors(I,C).multiplyScalar(e.panSpeed),Z(N.x,N.y),C.copy(I),e.update()}function nt(t){Ee(t),t.deltaY<0?se(H()):t.deltaY>0&&ne(H()),e.update()}function ot(t){let r=!1;switch(t.code){case e.keys.UP:Z(0,e.keyPanSpeed),r=!0;break;case e.keys.BOTTOM:Z(0,-e.keyPanSpeed),r=!0;break;case e.keys.LEFT:Z(e.keyPanSpeed,0),r=!0;break;case e.keys.RIGHT:Z(-e.keyPanSpeed,0),r=!0;break}r&&(t.preventDefault(),e.update())}function Oe(){if(b.length==1)S.set(b[0].pageX,b[0].pageY);else{const t=.5*(b[0].pageX+b[1].pageX),r=.5*(b[0].pageY+b[1].pageY);S.set(t,r)}}function we(){if(b.length==1)C.set(b[0].pageX,b[0].pageY);else{const t=.5*(b[0].pageX+b[1].pageX),r=.5*(b[0].pageY+b[1].pageY);C.set(t,r)}}function Te(){const t=b[0].pageX-b[1].pageX,r=b[0].pageY-b[1].pageY,c=Math.sqrt(t*t+r*r);j.set(0,c)}function at(){e.enableZoom&&Te(),e.enablePan&&we()}function rt(){e.enableZoom&&Te(),e.enableRotate&&Oe()}function Me(t){if(b.length==1)R.set(t.pageX,t.pageY);else{const c=pe(t),d=.5*(t.pageX+c.x),v=.5*(t.pageY+c.y);R.set(d,v)}L.subVectors(R,S).multiplyScalar(e.rotateSpeed);const r=e.domElement;r&&(re(2*Math.PI*L.x/r.clientHeight),be(2*Math.PI*L.y/r.clientHeight)),S.copy(R)}function Ae(t){if(b.length==1)I.set(t.pageX,t.pageY);else{const r=pe(t),c=.5*(t.pageX+r.x),d=.5*(t.pageY+r.y);I.set(c,d)}N.subVectors(I,C).multiplyScalar(e.panSpeed),Z(N.x,N.y),C.copy(I)}function Se(t){const r=pe(t),c=t.pageX-r.x,d=t.pageY-r.y,v=Math.sqrt(c*c+d*d);P.set(0,v),g.set(0,Math.pow(P.y/j.y,e.zoomSpeed)),ne(g.y),j.copy(P)}function it(t){e.enableZoom&&Se(t),e.enablePan&&Ae(t)}function st(t){e.enableZoom&&Se(t),e.enableRotate&&Me(t)}function _e(t){var r,c;e.enabled!==!1&&(b.length===0&&((r=e.domElement)==null||r.ownerDocument.addEventListener("pointermove",le),(c=e.domElement)==null||c.ownerDocument.addEventListener("pointerup",B)),ft(t),t.pointerType==="touch"?ut(t):ct(t))}function le(t){e.enabled!==!1&&(t.pointerType==="touch"?pt(t):lt(t))}function B(t){var r,c,d;ht(t),b.length===0&&((r=e.domElement)==null||r.releasePointerCapture(t.pointerId),(c=e.domElement)==null||c.ownerDocument.removeEventListener("pointermove",le),(d=e.domElement)==null||d.ownerDocument.removeEventListener("pointerup",B)),e.dispatchEvent(f),l=s.NONE}function ct(t){let r;switch(t.button){case 0:r=e.mouseButtons.LEFT;break;case 1:r=e.mouseButtons.MIDDLE;break;case 2:r=e.mouseButtons.RIGHT;break;default:r=-1}switch(r){case X.DOLLY:if(e.enableZoom===!1)return;Qe(t),l=s.DOLLY;break;case X.ROTATE:if(t.ctrlKey||t.metaKey||t.shiftKey){if(e.enablePan===!1)return;ve(t),l=s.PAN}else{if(e.enableRotate===!1)return;Pe(t),l=s.ROTATE}break;case X.PAN:if(t.ctrlKey||t.metaKey||t.shiftKey){if(e.enableRotate===!1)return;Pe(t),l=s.ROTATE}else{if(e.enablePan===!1)return;ve(t),l=s.PAN}break;default:l=s.NONE}l!==s.NONE&&e.dispatchEvent(u)}function lt(t){if(e.enabled!==!1)switch(l){case s.ROTATE:if(e.enableRotate===!1)return;Je(t);break;case s.DOLLY:if(e.enableZoom===!1)return;et(t);break;case s.PAN:if(e.enablePan===!1)return;tt(t);break}}function xe(t){e.enabled===!1||e.enableZoom===!1||l!==s.NONE&&l!==s.ROTATE||(t.preventDefault(),e.dispatchEvent(u),nt(t),e.dispatchEvent(f))}function ue(t){e.enabled===!1||e.enablePan===!1||ot(t)}function ut(t){switch(De(t),b.length){case 1:switch(e.touches.ONE){case K.ROTATE:if(e.enableRotate===!1)return;Oe(),l=s.TOUCH_ROTATE;break;case K.PAN:if(e.enablePan===!1)return;we(),l=s.TOUCH_PAN;break;default:l=s.NONE}break;case 2:switch(e.touches.TWO){case K.DOLLY_PAN:if(e.enableZoom===!1&&e.enablePan===!1)return;at(),l=s.TOUCH_DOLLY_PAN;break;case K.DOLLY_ROTATE:if(e.enableZoom===!1&&e.enableRotate===!1)return;rt(),l=s.TOUCH_DOLLY_ROTATE;break;default:l=s.NONE}break;default:l=s.NONE}l!==s.NONE&&e.dispatchEvent(u)}function pt(t){switch(De(t),l){case s.TOUCH_ROTATE:if(e.enableRotate===!1)return;Me(t),e.update();break;case s.TOUCH_PAN:if(e.enablePan===!1)return;Ae(t),e.update();break;case s.TOUCH_DOLLY_PAN:if(e.enableZoom===!1&&e.enablePan===!1)return;it(t),e.update();break;case s.TOUCH_DOLLY_ROTATE:if(e.enableZoom===!1&&e.enableRotate===!1)return;st(t),e.update();break;default:l=s.NONE}}function je(t){e.enabled!==!1&&t.preventDefault()}function ft(t){b.push(t)}function ht(t){delete te[t.pointerId];for(let r=0;r<b.length;r++)if(b[r].pointerId==t.pointerId){b.splice(r,1);return}}function De(t){let r=te[t.pointerId];r===void 0&&(r=new w,te[t.pointerId]=r),r.set(t.pageX,t.pageY)}function pe(t){const r=t.pointerId===b[0].pointerId?b[1]:b[0];return te[r.pointerId]}this.dollyIn=(t=H())=>{se(t),e.update()},this.dollyOut=(t=H())=>{ne(t),e.update()},this.getScale=()=>O,this.setScale=t=>{ie(t),e.update()},this.getZoomScale=()=>H(),o!==void 0&&this.connect(o),this.update()}};const zt=()=>parseInt(gt.replace(/\D+/g,"")),Ve=zt(),Qt=m.forwardRef(({makeDefault:a,camera:n,regress:o,domElement:e,enableDamping:p=!0,keyEvents:u=!1,onChange:f,onStart:s,onEnd:l,...y},h)=>{const E=x(g=>g.invalidate),O=x(g=>g.camera),T=x(g=>g.gl),S=x(g=>g.events),R=x(g=>g.setEvents),L=x(g=>g.set),C=x(g=>g.get),I=x(g=>g.performance),N=n||O,j=e||S.connected||T.domElement,P=m.useMemo(()=>new Nt(N),[N]);return de(()=>{P.enabled&&P.update()},-1),m.useEffect(()=>(u&&P.connect(u===!0?j:u),P.connect(j),()=>void P.dispose()),[u,j,o,P,E]),m.useEffect(()=>{const g=D=>{E(),o&&I.regress(),f&&f(D)},q=D=>{s&&s(D)},_=D=>{l&&l(D)};return P.addEventListener("change",g),P.addEventListener("start",q),P.addEventListener("end",_),()=>{P.removeEventListener("start",q),P.removeEventListener("end",_),P.removeEventListener("change",g)}},[f,s,l,P,E,R]),m.useEffect(()=>{if(a){const g=C().controls;return L({controls:P}),()=>L({controls:g})}},[a,P]),m.createElement("primitive",F({ref:h,object:P,enableDamping:p},y))});var Ge={exports:{}},kt="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",Ut=kt,Yt=Ut;function qe(){}function Be(){}Be.resetWarningCache=qe;var Ft=function(){function a(e,p,u,f,s,l){if(l!==Yt){var y=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw y.name="Invariant Violation",y}}a.isRequired=a;function n(){return a}var o={array:a,bigint:a,bool:a,func:a,number:a,object:a,string:a,symbol:a,any:a,arrayOf:n,element:a,elementType:a,instanceOf:n,node:a,objectOf:n,oneOf:n,oneOfType:n,shape:n,exact:n,checkPropTypes:Be,resetWarningCache:qe};return o.PropTypes=o,o};Ge.exports=Ft();var Jt=Ge.exports;const me=Ve>=154?"opaque_fragment":"output_fragment";class Ht extends yt{constructor(n){super(n),this.onBeforeCompile=(o,e)=>{const{isWebGL2:p}=e.capabilities;o.fragmentShader=o.fragmentShader.replace(`#include <${me}>`,`
        ${p?`#include <${me}>`:`#extension GL_OES_standard_derivatives : enable
#include <${me}>`}
      vec2 cxy = 2.0 * gl_PointCoord - 1.0;
      float r = dot(cxy, cxy);
      float delta = fwidth(r);     
      float mask = 1.0 - smoothstep(1.0 - delta, 1.0 + delta, r);
      gl_FragColor = vec4(gl_FragColor.rgb, mask * gl_FragColor.a );
      #include <tonemapping_fragment>
      #include <${Ve>=154?"colorspace_fragment":"encodings_fragment"}>
      `)}}}const en=m.forwardRef((a,n)=>{const[o]=m.useState(()=>new Ht(null));return m.createElement("primitive",F({},a,{object:o,ref:n,attach:"material"}))});let W,ee;const Wt=m.createContext(null),Ze=new Et,Xe=new A,Zt=m.forwardRef(({children:a,range:n,limit:o=1e3,...e},p)=>{const u=m.useRef(null);m.useImperativeHandle(p,()=>u.current,[]);const[f,s]=m.useState([]),[[l,y,h]]=m.useState(()=>[new Float32Array(o*3),Float32Array.from({length:o*3},()=>1),Float32Array.from({length:o},()=>1)]);m.useEffect(()=>{u.current.geometry.attributes.position.needsUpdate=!0}),de(()=>{for(u.current.updateMatrix(),u.current.updateMatrixWorld(),Ze.copy(u.current.matrixWorld).invert(),u.current.geometry.drawRange.count=Math.min(o,n!==void 0?n:o,f.length),W=0;W<f.length;W++)ee=f[W].current,ee.getWorldPosition(Xe).applyMatrix4(Ze),Xe.toArray(l,W*3),u.current.geometry.attributes.position.needsUpdate=!0,ee.matrixWorldNeedsUpdate=!0,ee.color.toArray(y,W*3),u.current.geometry.attributes.color.needsUpdate=!0,h.set([ee.size],W),u.current.geometry.attributes.size.needsUpdate=!0});const E=m.useMemo(()=>({getParent:()=>u,subscribe:O=>(s(T=>[...T,O]),()=>s(T=>T.filter(S=>S.current!==O.current)))}),[]);return m.createElement("points",F({userData:{instances:f},matrixAutoUpdate:!1,ref:u,raycast:()=>null},e),m.createElement("bufferGeometry",null,m.createElement("bufferAttribute",{attach:"attributes-position",count:l.length/3,array:l,itemSize:3,usage:V}),m.createElement("bufferAttribute",{attach:"attributes-color",count:y.length/3,array:y,itemSize:3,usage:V}),m.createElement("bufferAttribute",{attach:"attributes-size",count:h.length,array:h,itemSize:1,usage:V})),m.createElement(Wt.Provider,{value:E},a))}),Xt=m.forwardRef(({children:a,positions:n,colors:o,sizes:e,stride:p=3,...u},f)=>{const s=m.useRef(null);return m.useImperativeHandle(f,()=>s.current,[]),de(()=>{const l=s.current.geometry.attributes;l.position.needsUpdate=!0,o&&(l.color.needsUpdate=!0),e&&(l.size.needsUpdate=!0)}),m.createElement("points",F({ref:s},u),m.createElement("bufferGeometry",null,m.createElement("bufferAttribute",{attach:"attributes-position",count:n.length/p,array:n,itemSize:p,usage:V}),o&&m.createElement("bufferAttribute",{attach:"attributes-color",count:o.length/p,array:o,itemSize:3,usage:V}),e&&m.createElement("bufferAttribute",{attach:"attributes-size",count:e.length/p,array:e,itemSize:1,usage:V})),a)}),tn=m.forwardRef((a,n)=>a.positions instanceof Float32Array?m.createElement(Xt,F({},a,{ref:n})):m.createElement(Zt,F({},a,{ref:n})));function nn({all:a,scene:n,camera:o}){const e=x(({gl:f})=>f),p=x(({camera:f})=>f),u=x(({scene:f})=>f);return m.useLayoutEffect(()=>{const f=[];a&&(n||u).traverse(y=>{y.visible===!1&&(f.push(y),y.visible=!0)}),e.compile(n||u,o||p);const s=new Pt(128);new vt(.01,1e5,s).update(e,n||u),s.dispose(),f.forEach(y=>y.visible=!1)},[]),null}export{Qt as O,nn as P,F as _,tn as a,en as b,Ot as c,Bt as i,Jt as p};
